# κµ¬λ§¤ μ”μ•½ λ°°λ„ μ¶”μ² λ΅μ§ μ„¤κ³„ λ¬Έμ„

## π“ 1. λ°μ΄ν„° λ¶„μ„ κΈ°μ¤€ (μ°μ„ μμ„)

### 1.1 κµ¬λ§¤ νμ κΈ°λ° μ μν™” (κ°€μ¤‘μΉ μ μ©)

λ‹¨μ νμκ°€ μ•„λ‹ **κ°€μ¤‘μΉ μ μ**λ¥Ό μ‚¬μ©ν•μ—¬ λ” μ •ν™•ν• μΈμ‚¬μ΄νΈ μ κ³µ:

```
μƒν’ μ μ = κµ¬λ§¤νμ Γ— μ‹κ°„κ°€μ¤‘μΉ Γ— λ°λ³µκµ¬λ§¤λ³΄λ„μ¤ Γ— μλ‰κ°€μ¤‘μΉ
```

#### κ°€μ¤‘μΉ κ³„μ‚° λ°©μ‹:
- **μ‹κ°„ κ°€μ¤‘μΉ**: μµκ·Ό κµ¬λ§¤μΌμλ΅ λ†’μ€ μ μ
  - μµκ·Ό 1μ£ΌμΌ: 1.5λ°°
  - μµκ·Ό 1κ°μ›”: 1.2λ°°
  - μµκ·Ό 3κ°μ›”: 1.0λ°°
  - κ·Έ μ΄μ „: 0.7λ°°

- **λ°λ³µ κµ¬λ§¤ λ³΄λ„μ¤**: κ°™μ€ μƒν’μ„ μ—¬λ¬ λ² κµ¬λ§¤ν•λ©΄ μ‹ λΆ°λ„ μƒμΉ
  - 1ν: 1.0λ°°
  - 2-3ν: 1.3λ°°
  - 4-5ν: 1.5λ°°
  - 6ν μ΄μƒ: 2.0λ°°

- **μλ‰ κ°€μ¤‘μΉ**: κµ¬λ§¤ μλ‰μ΄ λ§μ„μλ΅ μ„ νΈλ„ λ†’μ
  - 1κ°: 1.0λ°°
  - 2-3κ°: 1.2λ°°
  - 4κ° μ΄μƒ: 1.5λ°°

### 1.2 μΈμ‚¬μ΄νΈ μ ν•λ³„ μ¶”μ¶

#### A. μµλ‹¤ κµ¬λ§¤ μƒν’ (Top 3)
- κ°€μ¤‘μΉ μ μκ°€ κ°€μ¥ λ†’μ€ μƒν’ 3κ°
- μ‚¬μ©μμ—κ² "κ°€μ¥ μμ£Ό μ£Όλ¬Έν•μ‹λ”" λ©”μ‹μ§€

#### B. μµκ·Ό νΈλ λ“ (μµκ·Ό 1κ°μ›”)
- μµκ·Ό 1κ°μ›” λ‚΄ κµ¬λ§¤ν• μƒν’ μ¤‘ λΉλ„ λ†’μ€ κ²ƒ
- "μ”μ¦ μμ£Ό μ£Όλ¬Έν•μ‹λ”" λ©”μ‹μ§€

#### C. λ°λ³µ κµ¬λ§¤ μƒν’ (3ν μ΄μƒ)
- κ°™μ€ μƒν’μ„ 3ν μ΄μƒ κµ¬λ§¤ν• κ²ƒ
- "κΎΈμ¤€ν μ£Όλ¬Έν•μ‹λ”" λ©”μ‹μ§€

#### D. μƒλ΅ μ‹λ„ν• μƒν’ (μµκ·Ό 1κ°μ›” λ‚΄ μ²« κµ¬λ§¤)
- μµκ·Ό 1κ°μ›” λ‚΄ μ²μ κµ¬λ§¤ν• μƒν’
- "μƒλ΅­κ² μ‹λ„ν•μ‹ " λ©”μ‹μ§€

## π― 2. κ³ κ°μ—κ² μ™€λ‹Ώλ” λ΅μ§

### 2.1 κ°μΈν™”λ μΈμ‚¬μ΄νΈ μ κ³µ

#### μμ‹ 1: κµ¬λ§¤ ν¨ν„΄ λ°κ²¬
```
"μ§€μ€λ‹, μ§€λ‚ ν• λ‹¬κ°„ 6ν κµ¬λ§¤ν•μ…¨λ„¤μ”!
μ‚Όκ°κΉ€λ°¥ λ¨μμ„ 3λ²μ΄λ‚ μ£Όλ¬Έν•μ‹λ” κ±Έ λ³΄λ‹ 
μ•„μΉ¨ μ‹μ‚¬λ΅ μμ£Ό λ“μ‹λ”κµ°μ”! π±"
```

#### μμ‹ 2: λΌμ΄ν”„μ¤νƒ€μΌ λ°μ
```
"λ―Όμλ‹, μ§€λ‚ ν• λ‹¬κ°„ 15ν κµ¬λ§¤ν•μ…¨λ„¤μ”!
μ μ΅λ³¶μ λ°€ν‚¤νΈμ™€ μ—°μ–΄λ¥Ό λ²κ°μ•„ μ£Όλ¬Έν•μ‹λ” κ±Έ λ³΄λ‹
μ”λ¦¬ μ‹¤λ ¥μ΄ λ€λ‹¨ν•μ‹κµ°μ”! μ¤λ μ €λ… λ©”λ‰΄ μ¶”μ²ν•΄λ“λ¦΄κ²μ” π½οΈ"
```

#### μμ‹ 3: κ°€μ΅± μ¤‘μ‹¬ λ©”μ‹μ§€
```
"μν¬λ‹, μ§€λ‚ ν• λ‹¬κ°„ 18ν κµ¬λ§¤ν•μ…¨λ„¤μ”!
μλ‘λ¶€μ°κ° λ°€ν‚¤νΈμ™€ κ·Έλ¦­μ”κ±°νΈλ¥Ό μμ£Ό μ£Όλ¬Έν•μ‹λ” κ±Έ λ³΄λ‹
μ•„μ΄μ™€ κ°€μ΅± κ±΄κ°•μ„ μµμ°μ„ μΌλ΅ μƒκ°ν•μ‹λ”κµ°μ”! 
μ£Όλ§ κ°€μ΅± μ‹μ‚¬ μ¤€λΉ„ν•΄λ“λ¦΄κ²μ” π‘¨β€π‘©β€π‘§"
```

### 2.2 κµ¬λ§¤ ν†µκ³„ μΈμ‚¬μ΄νΈ

#### κµ¬λ§¤ λΉλ„ λ¶„μ„
- "ν‰κ·  XμΌλ§λ‹¤ μ£Όλ¬Έν•μ‹λ”κµ°μ”!"
- "μ΄λ² μ£Όλ” ν‰μ†λ³΄λ‹¤ μ΅°κΈ λ” μμ£Ό μ£Όλ¬Έν•μ…¨λ„¤μ”!"

#### μΉ΄ν…κ³ λ¦¬ μ„ νΈλ„
- "κ°„νΈμ‹ μΉ΄ν…κ³ λ¦¬λ¥Ό κ°€μ¥ μ„ νΈν•μ‹λ”κµ°μ”!"
- "ν•΄μ‚°λ¬Ό κµ¬λ§¤κ°€ ν‰μ†λ³΄λ‹¤ 30% μ¦κ°€ν–μ–΄μ”!"

#### μ‹κ°„λ€ ν¨ν„΄
- "μ£Όλ΅ μ£Όλ§μ— μ£Όλ¬Έν•μ‹λ” ν¨ν„΄μ΄ λ³΄μ΄λ„¤μ”!"
- "μ €λ… μ‹κ°„λ€ μ£Όλ¬Έμ΄ λ§μΌμ‹κµ°μ”!"

## π¨ 3. λλ¤ λ©”μ‹μ§€ ν…ν”λ¦Ώ μ‹μ¤ν…

### 3.1 ν…ν”λ¦Ώ κµ¬μ΅°

κ° μ μ € νƒ€μ…λ³„λ΅ **5-7κ°μ λ©”μ‹μ§€ ν…ν”λ¦Ώ**μ„ μ¤€λΉ„ν•κ³ , 
λλ¤ν•κ² μ„ νƒν•κ±°λ‚ μ΅°κ±΄μ— λ”°λΌ μ„ νƒ

### 3.2 ν…ν”λ¦Ώ μμ‹ (κΉ€μ§€μ€ - 20λ€ μ—¬μ„±)

#### ν…ν”λ¦Ώ 1: κ°„νΈν•¨ κ°•μ΅°
```
"μ§€μ€λ‹, μ§€λ‚ ν• λ‹¬κ°„ {count}ν κµ¬λ§¤ν•μ…¨λ„¤μ”!
{products} κ°™μ€ κ°„νΈμ‹μ„ μμ£Ό μ£Όλ¬Έν•μ‹λ” κ±Έ λ³΄λ‹
λ°”μ μΌμƒ μ†μ—μ„λ„ κΌΌκΌΌν•κ² λΌλ‹λ¥Ό μ±™κΈ°μ‹λ”κµ°μ”! 
μ¤λλ„ κ°„λ‹¨ν•κ² ν•΄κ²°ν•  μ μλ” μƒν’μ„ μ¤€λΉ„ν–μ–΄μ” π±"
```

#### ν…ν”λ¦Ώ 2: κ²½μ μ„± κ°•μ΅°
```
"μ§€μ€λ‹, μ§€λ‚ ν• λ‹¬κ°„ {count}ν κµ¬λ§¤ν•μ…¨λ„¤μ”!
{products}λ¥Ό μ¦κ²¨ μ£Όλ¬Έν•μ‹λ” κ±Έ λ³΄λ‹
κ°€μ„±λΉ„ μΆ‹μ€ μƒν’μ„ μ μ°ΎμΌμ‹λ”κµ°μ”! 
μ¤λλ„ ν•©λ¦¬μ μΈ κ°€κ²©μ μƒν’μ„ μ¶”μ²ν•΄λ“λ¦΄κ²μ” π’°"
```

#### ν…ν”λ¦Ώ 3: νΈμμ„± κ°•μ΅°
```
"μ§€μ€λ‹, μ§€λ‚ ν• λ‹¬κ°„ {count}ν κµ¬λ§¤ν•μ…¨λ„¤μ”!
{products} κ°™μ€ μ¦‰μ„μ‹ν’μ„ μμ£Ό μ£Όλ¬Έν•μ‹λ” κ±Έ λ³΄λ‹
μ‹κ°„ μ μ•½μ„ μ¤‘μ‹ν•μ‹λ”κµ°μ”! 
μ¤λλ„ λΉ λ¥΄κ² μ¤€λΉ„ν•  μ μλ” μƒν’μ„ κ³¨λΌλ΄¤μ–΄μ” β΅"
```

#### ν…ν”λ¦Ώ 4: κ±΄κ°• κ³ λ ¤
```
"μ§€μ€λ‹, μ§€λ‚ ν• λ‹¬κ°„ {count}ν κµ¬λ§¤ν•μ…¨λ„¤μ”!
{products}λ¥Ό κΎΈμ¤€ν μ£Όλ¬Έν•μ‹λ” κ±Έ λ³΄λ‹
νΌμμ„λ„ κ±΄κ°•ν• μ‹λ‹¨μ„ μ±™κΈ°μ‹λ”κµ°μ”! 
μ¤λλ„ μμ–‘ λ°Έλ°μ¤ μΆ‹μ€ μƒν’μ„ μ¶”μ²ν•΄λ“λ¦΄κ²μ” π’"
```

#### ν…ν”λ¦Ώ 5: ν¨ν„΄ λ°κ²¬
```
"μ§€μ€λ‹, μ§€λ‚ ν• λ‹¬κ°„ {count}ν κµ¬λ§¤ν•μ…¨λ„¤μ”!
{most_purchased}λ¥Ό {repeat_count}λ²μ΄λ‚ μ£Όλ¬Έν•μ‹λ” κ±Έ λ³΄λ‹
μ •λ§ μΆ‹μ•„ν•μ‹λ”κµ°μ”! 
λΉ„μ·ν• λ§›μ μƒν’λ„ μ¶”μ²ν•΄λ“λ¦΄κ²μ” π―"
```

### 3.3 λλ¤ μ„ νƒ λ΅μ§

#### λ°©λ²• 1: μ™„μ „ λλ¤
```typescript
const templates = [template1, template2, template3, ...];
const selectedTemplate = templates[Math.floor(Math.random() * templates.length)];
```

#### λ°©λ²• 2: μ‹κ°„λ€λ³„ λλ¤
- μ•„μΉ¨ (6-11μ‹): κ°„νΈμ‹/μ•„μΉ¨ κ°•μ΅° ν…ν”λ¦Ώ
- μ μ‹¬ (12-17μ‹): κ±΄κ°•μ‹/λ‹¤μ΄μ–΄νΈ κ°•μ΅° ν…ν”λ¦Ώ
- μ €λ… (18-23μ‹): μ”λ¦¬/λ°€ν‚¤νΈ κ°•μ΅° ν…ν”λ¦Ώ

#### λ°©λ²• 3: μ”μΌλ³„ λλ¤
- ν‰μΌ: κ°„νΈν•¨/μ‹κ°„μ μ•½ κ°•μ΅°
- μ£Όλ§: κ°€μ΅±/μ”λ¦¬ κ°•μ΅°

#### λ°©λ²• 4: κµ¬λ§¤ ν¨ν„΄ κΈ°λ° μ„ νƒ
- λ°λ³µ κµ¬λ§¤κ°€ λ§μΌλ©΄ β†’ "κΎΈμ¤€ν μ£Όλ¬Έν•μ‹λ”" ν…ν”λ¦Ώ
- μƒ μƒν’ μ‹λ„κ°€ λ§μΌλ©΄ β†’ "μƒλ΅­κ² μ‹λ„ν•μ‹λ”" ν…ν”λ¦Ώ
- κµ¬λ§¤ λΉλ„κ°€ λ†’μΌλ©΄ β†’ "ν™λ°ν• κµ¬λ§¤ ν¨ν„΄" ν…ν”λ¦Ώ

### 3.4 λ™μ  λ³€μ μΉν™

ν…ν”λ¦Ώ λ‚΄ λ³€μλ¥Ό μ‹¤μ  λ°μ΄ν„°λ΅ μΉν™:

```typescript
{
  count: 6,  // κµ¬λ§¤ νμ
  products: "μ‚Όκ°κΉ€λ°¥ λ¨μ, λƒ‰λ™ λ§λ‘, μ¦‰μ„ μΉ΄λ ",  // μƒν’λ…
  most_purchased: "μ‚Όκ°κΉ€λ°¥ λ¨μ",  // μµλ‹¤ κµ¬λ§¤ μƒν’
  repeat_count: 3,  // λ°λ³µ κµ¬λ§¤ νμ
  category: "κ°„νΈμ‹",  // μ£Όμ” μΉ΄ν…κ³ λ¦¬
  avg_days: 5,  // ν‰κ·  κµ¬λ§¤ μ£ΌκΈ°
  trend: "+20%",  // νΈλ λ“ λ³€ν™”
}
```

## π”§ 4. κµ¬ν„ μ•„ν‚¤ν…μ²

### 4.1 λ°±μ—”λ“ API μ„¤κ³„

#### `GET /api/users/{user_id}/purchase-summary`

**Response:**
```json
{
  "user_id": 1,
  "user_name": "κΉ€μ§€μ€",
  "period": "last_month",
  "total_purchases": 6,
  "insights": {
    "top_products": [
      {
        "product_id": 65,
        "product_name": "μ‚Όκ°κΉ€λ°¥ λ¨μ",
        "purchase_count": 3,
        "weighted_score": 4.5,
        "last_purchased": "2024-12-15"
      },
      {
        "product_id": 64,
        "product_name": "λƒ‰λ™ λ§λ‘",
        "purchase_count": 2,
        "weighted_score": 2.8,
        "last_purchased": "2024-12-10"
      }
    ],
    "recent_trends": [
      {
        "product_id": 69,
        "product_name": "μ¦‰μ„ μΉ΄λ ",
        "purchase_count": 1,
        "first_purchased": "2024-12-20"
      }
    ],
    "repeat_purchases": [
      {
        "product_id": 65,
        "product_name": "μ‚Όκ°κΉ€λ°¥ λ¨μ",
        "repeat_count": 3
      }
    ],
    "category_preferences": {
      "κ°„νΈμ‹/λ°€ν‚¤νΈ": 0.4,
      "λƒ‰λ™μ‹ν’": 0.3,
      "μ¦‰μ„μ‹ν’": 0.2
    }
  },
  "message_template_id": 1,
  "message_variables": {
    "count": 6,
    "products": "μ‚Όκ°κΉ€λ°¥ λ¨μ, λƒ‰λ™ λ§λ‘, μ¦‰μ„ μΉ΄λ ",
    "most_purchased": "μ‚Όκ°κΉ€λ°¥ λ¨μ",
    "repeat_count": 3
  }
}
```

### 4.2 ν”„λ΅ νΈμ—”λ“ λ΅μ§

#### μ»΄ν¬λ„νΈ κµ¬μ΅°:
```
PurchaseSummaryBanner
  β”β”€β”€ API νΈμ¶ (useEffect)
  β”β”€β”€ λ©”μ‹μ§€ ν…ν”λ¦Ώ μ„ νƒ (λλ¤ λλ” μ΅°κ±΄λ¶€)
  β”β”€β”€ λ³€μ μΉν™
  β””β”€β”€ UI λ λ”λ§
```

#### λ©”μ‹μ§€ ν…ν”λ¦Ώ κ΄€λ¦¬:
```typescript
// frontend/app/data/messageTemplates.ts
export const messageTemplates = {
  '20s_female': [
    { id: 1, template: "...", weight: 1.0 },
    { id: 2, template: "...", weight: 0.8 },
    // ...
  ],
  '30s_male': [...],
  '40s_female': [...]
};
```

## π“ 5. μ¶”μ² μ°μ„ μμ„

### 5.1 μ μ κ³„μ‚° κ³µμ‹

```
μµμΆ… μ¶”μ² μ μ = 
  (κµ¬λ§¤μ΄λ ¥ μ μ Γ— 0.5) + 
  (ν”„λ΅ν•„ λ§¤μΉ­ μ μ Γ— 0.3) + 
  (μΈκΈ°λ„ μ μ Γ— 0.2)
```

### 5.2 κµ¬λ§¤μ΄λ ¥ μ μ
- κ°€μ¤‘μΉ μ μκ°€ λ†’μ€ μƒν’ μ°μ„ 
- λ°λ³µ κµ¬λ§¤ μƒν’ μ°μ„ 
- μµκ·Ό κµ¬λ§¤ μƒν’ μ°μ„ 

### 5.3 ν”„λ΅ν•„ λ§¤μΉ­ μ μ
- target_age_groups μΌμΉ
- target_gender μΌμΉ
- used_in (μ”λ¦¬λ²•) μ„ νΈλ„

### 5.4 μΈκΈ°λ„ μ μ
- review_count Γ— rating
- purchase_count (μ „μ²΄ μ‚¬μ©μ κΈ°μ¤€)

## π― 6. μµμΆ… μ¶”μ²

### 6.1 κ°λ° λ΅μ§ μ°μ„ μμ„

1. **1λ‹¨κ³„: κµ¬λ§¤ νμ κΈ°λ° (κ°€μ¤‘μΉ μ μ©)**
   - κµ¬ν„ λ‚μ΄λ„: β­β­
   - ν¨κ³Ό: β­β­β­β­
   - κ°€μ¥ μ§κ΄€μ μ΄κ³  κ³ κ°μ—κ² μ™€λ‹Ώμ

2. **2λ‹¨κ³„: λ°λ³µ κµ¬λ§¤ λ³΄λ„μ¤**
   - κµ¬ν„ λ‚μ΄λ„: β­β­
   - ν¨κ³Ό: β­β­β­β­β­
   - "λ‚΄κ°€ μΆ‹μ•„ν•λ” μƒν’" μΈμ‹ κ°•ν™”

3. **3λ‹¨κ³„: μ‹κ°„ κ°€μ¤‘μΉ**
   - κµ¬ν„ λ‚μ΄λ„: β­β­β­
   - ν¨κ³Ό: β­β­β­β­
   - μµκ·Ό νΈλ λ“ λ°μ

4. **4λ‹¨κ³„: λλ¤ λ©”μ‹μ§€ ν…ν”λ¦Ώ**
   - κµ¬ν„ λ‚μ΄λ„: β­β­
   - ν¨κ³Ό: β­β­β­β­β­
   - μ§€λ£¨ν•¨ λ°©μ§€, μ¬λ°©λ¬Έ μ λ„

### 6.2 κ³ κ°μ—κ² μ™€λ‹Ώλ” ν•µμ‹¬ ν¬μΈνΈ

1. **κµ¬μ²΄μ μΈ μ«μ**: "3λ²μ΄λ‚ μ£Όλ¬Έν•μ…¨μ–΄μ”!"
2. **ν¨ν„΄ λ°κ²¬**: "μμ£Ό μ£Όλ¬Έν•μ‹λ” κ±Έ λ³΄λ‹..."
3. **κ°μΈν™”**: μ μ €λ³„ λΌμ΄ν”„μ¤νƒ€μΌ λ°μ
4. **κΈμ •μ  ν”Όλ“λ°±**: "μ”λ¦¬ μ‹¤λ ¥μ΄ λ€λ‹¨ν•μ‹κµ°μ”!"
5. **ν–‰λ™ μ λ„**: "μ¤λλ„ μ¶”μ²ν•΄λ“λ¦΄κ²μ”!"

## π€ 7. κµ¬ν„ μ²΄ν¬λ¦¬μ¤νΈ

### λ°±μ—”λ“
- [ ] `GET /api/users/{user_id}/purchase-summary` API κµ¬ν„
- [ ] κ°€μ¤‘μΉ μ μ κ³„μ‚° λ΅μ§
- [ ] μΈμ‚¬μ΄νΈ μ¶”μ¶ λ΅μ§
- [ ] λ©”μ‹μ§€ ν…ν”λ¦Ώ μ„ νƒ λ΅μ§

### ν”„λ΅ νΈμ—”λ“
- [ ] API νΈμ¶ λ° λ°μ΄ν„° μ²λ¦¬
- [ ] λ©”μ‹μ§€ ν…ν”λ¦Ώ μ‹μ¤ν…
- [ ] λλ¤ μ„ νƒ λ΅μ§
- [ ] λ³€μ μΉν™ λ΅μ§
- [ ] UI μ—…λ°μ΄νΈ

